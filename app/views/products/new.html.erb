<h1>Add a New Product</h1>

<% if flash[:notice] != nil %>
  <% if flash[:notice].length > 1 %>
    <%= flash[:notice].join("<br>").html_safe %>
  <% else %>
    <%= flash[:notice].join("") %>
    <% end %>
<% end %>

<%= form_for @product, url: products_path do |f| %>

<%= f.label :name %>
<%= f.text_field :name %>

<%= f.label :price %>
<%= f.text_field :price %>

<%= f.label :quantity %>
<%= f.text_field :quantity %>

<%= f.fields_for :categories do |categories_fields| %>
  <%= categories_fields.label :name, "Add New Category" %>
  <%= categories_fields.text_field :name %>
<% end %>

<%= f.label :category_ids, "Choose Categories" %>
<%= f.collection_select :category_ids, Category.all, :id, :name, {},  {:multiple => true} %>

<%= f.label :description %>
<%= f.text_area :description %>

<%= f.label :picture %>
<%= f.text_field :picture %>

<%= f.hidden_field :user_id, value: session[:user_id] %>
<%= f.hidden_field :active, value: true %>

<%= f.submit %>

<% end %>
